Instructions

Install the linux headers for your running kernel
To see which kernel you're running, type:
$ uname -r
or $ mhwd-kernel -li

After that, install the appropriate headers. These files are needed to develop kernel modules. The package names may change from each distro. In my case it was:
$ sudo apt install linux415-headers

Possible alternatives:
$ sudo apt install kernel-headers-$(uname -r)
or $ sudo apt install linux-headers-$(uname -r)
or $ sudo apt-get install linux-headers-generic

After writing a simple module .c file, compile it using the makefile.
$ make

This will generate some files, including a .ko (kernel object) file that will be loaded in the kernel. You can see some information about it such as version number and license using:
$ modinfo module_name.ko

You can install the module using:
$ sudo insmod module_name.ko

To see which modules are currently running, type:
$ lsmod
$ lsmod | grep module_name

Our hello world should be printed now. To see it, use the dmesg command:
$ sudo dmesg 
$ sudo dmesg | tail

Theses prints can also be sent to other places. 
If your setup is running syslog, check /var/log/messages
$ tail /var/log/messages

If your setup is running systemd, you can check it using the journalctl command (-k shows only kernel messages, like dmesg does, and -f to actively follow the logs):
$ journalctl -k -f

Remember that dmesg works regardless of setup.

To remove it:
$ sudo rmmod module_name.ko

Now, our cleanup function should execute.
